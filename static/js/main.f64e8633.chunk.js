(this["webpackJsonpestate-calc"]=this["webpackJsonpestate-calc"]||[]).push([[0],{175:function(e,t,a){"use strict";a.r(t);var r=a(1),c=a(0),n=a.n(c),i=a(62),s=a.n(i),l=(a(74),a(3)),o=a(4),u=function(e){var t=Object(o.a)({},e);return Object.keys(t).forEach((function(e){t[e]=+t[e]})),t},j=n.a.createContext(),b=n.a.createContext(),d=a(18),m=a(13),O=a(68),f=function(e){var t=e.id,a=e.label,c=Object(O.a)(e,["id","label"]),n=Object(d.c)(c),i=Object(l.a)(n,2),s=i[0],u=i[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("label",{htmlFor:t,className:"form__label",children:a}),Object(r.jsx)("input",Object(o.a)(Object(o.a)({className:"form__filed"},s),c)),u.touched&&u.error?Object(r.jsx)("div",{className:"form__error",children:u.error}):null]})};f.defaultProps={label:"",id:""};var p=f,h=function(){var e=Object(c.useContext)(j),t=e.initialValues,a=e.feePercents,n=e.saveForm,i=e.clearForm,s=e.submitForm,b=Object(c.useState)(0),O=Object(l.a)(b,2),f=O[0],h=O[1];return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(d.b,{setFieldValue:!0,validateOnChange:!0,initialValues:t,enableReinitialize:!0,validationSchema:m.a({price:m.b().required("\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"),period:m.b().required("\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"),fee:m.b().required("\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"),rate:m.b().required("\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c")}),onSubmit:s,children:function(e){var t=e.handleChange,c=e.setFieldValue,l=e.values;return Object(r.jsxs)(d.a,{className:"form",children:[Object(r.jsx)(p,{name:"price",id:"price",label:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u043d\u0435\u0434\u0432\u0438\u0436\u0438\u043c\u043e\u0441\u0442\u0438",onKeyUp:function(e){t(e),0!==f&&c("fee",Math.round(+e.target.value*f/100).toString()),s(u(l))}}),Object(r.jsx)(p,{name:"fee",id:"fee",label:"\u041f\u0435\u0440\u0432\u043e\u043d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0439 \u0432\u0437\u043d\u043e\u0441",onKeyUp:function(e){t(e),0!==f&&c("price",Math.round(+e.target.value/f*100).toString()),s(u(l))}}),Object(r.jsx)("div",{className:"form__percent",children:a.map((function(e){return Object(r.jsx)("button",{id:e,type:"button",className:"".concat(f===e&&"form__percent-rate_active"," form__percent-rate"),onClick:function(t){var a;h(f===(a=e)?0:a),function(e,t,a){var r=+e.target.id,c=t.price,n=t.fee;if(c){var i=Math.round(+c*r/100).toString();a("fee",i),s(u(Object(o.a)(Object(o.a)({},t),{},{fee:i})))}else if(!c&&n){var l=Math.round(+n/r*100).toString();a("price",l),s(u(Object(o.a)(Object(o.a)({},t),{},{newPrice:l})))}}(t,l,c)},children:"".concat(e," %")},e)}))}),Object(r.jsx)(p,{name:"period",id:"period",label:"\u0421\u0440\u043e\u043a \u043a\u0440\u0435\u0434\u0438\u0442\u0430",onKeyUp:function(e){t(e),s(u(l))}}),Object(r.jsx)(p,{name:"rate",id:"rate",label:"\u041f\u0440\u043e\u0446\u0435\u043d\u0442\u043d\u0430\u044f \u0441\u0442\u0430\u0432\u043a\u0430",onKeyUp:function(e){t(e),s(u(l))}}),Object(r.jsx)("button",{type:"button",className:"form__button form__button_type_save",onClick:function(){n(l)},children:"Save"}),Object(r.jsx)("button",{type:"reset",className:"form__button form__button_type_clear",onClick:i,children:"Clear"})]})}})})},v=function(){var e=Object(c.useContext)(b),t=e.loan,a=e.payment,n=e.salary,i=e.overpayment;return Object(r.jsxs)("div",{className:"result",children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{className:"result__heading",children:"\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439 \u043f\u043b\u0430\u0442\u0451\u0436"}),Object(r.jsx)("p",{className:"result__values",children:Number.isNaN(a)||0===a?"":"".concat(a.toLocaleString("ru-RU",{maximumFractionDigits:0})," \u20bd")})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{className:"result__heading",children:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0439 \u0434\u043e\u0445\u043e\u0434"}),Object(r.jsx)("p",{className:"result__values",children:Number.isNaN(n)||0===n?"":"".concat(n.toLocaleString("ru-RU",{maximumFractionDigits:0})," \u20bd")})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{className:"result__heading",children:"\u041f\u0435\u0440\u0435\u043f\u043b\u0430\u0442\u0430"}),Object(r.jsx)("p",{className:"result__values",children:Number.isNaN(i)||0===i?"":"".concat(i.toLocaleString("ru-RU",{maximumFractionDigits:0})," \u20bd")})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{className:"result__heading",children:"\u0422\u0435\u043b\u043e \u043a\u0440\u0435\u0434\u0438\u0442\u0430"}),Object(r.jsx)("p",{className:"result__values",children:Number.isNaN(t)||0===t?"":"".concat(t.toLocaleString("ru-RU",{maximumFractionDigits:0})," \u20bd")})]})]})},x=function(){return Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)(h,{}),Object(r.jsx)(v,{})]})};var _=function(){var e=Object(c.useState)({price:"",fee:"",period:"",rate:""}),t=Object(l.a)(e,2),a=t[0],n=t[1],i=Object(c.useState)(0),s=Object(l.a)(i,2),o=s[0],d=s[1],m=Object(c.useState)(0),O=Object(l.a)(m,2),f=O[0],p=O[1],h=Object(c.useState)(0),v=Object(l.a)(h,2),_=v[0],g=v[1],N=Object(c.useState)(0),y=Object(l.a)(N,2),S=y[0],F=y[1],C=function(e){var t=function(e){var t=e.price,a=e.fee,r=e.period,c=e.rate,n=t>=a?t-a:0,i=n*(c/1200+c/1200/(Math.pow(1+c/1200,r)-1));return{loan:n,payment:i,salary:i/3*5,overpayment:t>=a?i*r-t+a:0}}(u(e));d(t.loan),p(t.payment),g(t.salary),F(t.overpayment)};return Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem("initialValues"));if(e){var t=e.price,a=e.fee,r=e.period,c=e.rate;n({price:t.toString(),fee:a.toString(),period:r.toString(),rate:c.toString()}),C(e)}}),[]),Object(r.jsx)(j.Provider,{value:{initialValues:a,feePercents:[10,15,20,25,30],loan:o,payment:f,salary:_,overpayment:S,saveForm:function(e){localStorage.setItem("initialValues",JSON.stringify(u(e)))},clearForm:function(){n({price:"",fee:"",period:"",rate:""}),d(0),p(0),g(0),F(0),localStorage.removeItem("initialValues")},submitForm:C},children:Object(r.jsx)(b.Provider,{value:{loan:o,payment:f,salary:_,overpayment:S},children:Object(r.jsx)("div",{className:"app",children:Object(r.jsx)(x,{})})})})};s.a.render(Object(r.jsx)(n.a.StrictMode,{children:Object(r.jsx)(_,{})}),document.getElementById("root"))},74:function(e,t,a){}},[[175,1,2]]]);
//# sourceMappingURL=main.f64e8633.chunk.js.map